<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="https://res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/vconsole/3.0.0/vconsole.min.js"></script>
    <style>
        *{padding:0;margin:0;}
        html{width: 100%;}
        body{width:100%;}
    </style>
    <script>
        var vConsole = new VConsole();
    </script>
</head>

<body>
        
    <video></video>
    <script src="./index.js"></script>
    <!-- <script>
        window.URL = (window.URL || window.webkitURL || window.mozURL || window.msURL);
        if (navigator.mediaDevices === undefined) {
            navigator.mediaDevices = {};
        }
        if (navigator.mediaDevices.getUserMedia === undefined) {
            navigator.mediaDevices.getUserMedia = function(constraints) {
                var getUserMedia = navigator.webkitGetUserMedia || navigator.mozGetUserMedia;
                if (!getUserMedia) {
                    return Promise.reject(new Error('getUserMedia is not implemented in this browser'));
                }
                return new Promise(function(resolve, reject) {
                    getUserMedia.call(navigator, constraints, resolve, reject);
                });
            }
        }

        // 配置设置
        var mediaOpts = {
            audio: false,
            video: true,
            // video: { width: 1280, height: 720 }
            // video: { facingMode: "environment"}, // 或者 "user"
        }

        // 成功回调
        function successFunc(stream) {
            var video = document.querySelector('video');
            if ("srcObject" in video) {
                video.srcObject = stream
            } else {
                video.src = window.URL && window.URL.createObjectURL(stream) || stream
            }
            video.play();
        }

        function errorFunc(err) {
            alert(err.name);
        }

        // 正式启动摄像头
        navigator.mediaDevices.getUserMedia(mediaOpts).then(successFunc).catch(errorFunc);
    </script> -->
</body>

</html>